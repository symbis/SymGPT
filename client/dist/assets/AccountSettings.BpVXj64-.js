import{r as e,j as s,f4 as a,fg as t,fh as l,eb as n,fi as r,ec as i,dx as o,cL as c,cK as m,cu as d,bZ as x,b$ as u,c5 as p,fj as h,fk as g}from"./vendor.DW7gwImd.js";import{b as v,i as j,d as f,a as _,Y as b,e as N,f as w,D as y,g as C,o as k,h as S,j as A,k as z,p as F,l as M,O,G as I,m as R,H as E,c as T,q as P,C as D,r as L,S as H,s as V,t as B,v as $,w as K,x as U,R as q,y as G,Z as W,z as Z,V as Q,I as J,F as X,J as Y,K as ee,L as se,M as ae,N as te,P as le,Q as ne,E as re,T as ie,U as oe,W as ce,X as me,$ as de,_ as xe,a0 as ue,a1 as pe,a2 as he,a3 as ge,a4 as ve,a5 as je,a6 as fe,a7 as _e,a8 as be,a9 as Ne,aa as we,ab as ye}from"./index.DnlyrBWI.js";import"./utilities.Be-Is_-r.js";import{aa as Ce,z as ke,A as Se,B as Ae,ag as ze,ah as Fe,F as Me}from"./radix-ui.pug8kkUz.js";import{h as Oe,u as Ie,k as Re,g as Ee,b as Te,c as Pe,f as De}from"./tanstack-vendor.klJPGzX6.js";import{z as Le,L as He,F as Ve,q as Be,b as $e}from"./headlessui.DsgJ_TMP.js";import"./react-interactions.CoYeKB04.js";import"./markdown_highlight.YFvJ8PVJ.js";import"./validation.CeCA-dRw.js";import"./math-katex.steiuUVT.js";import"./locales.4R84iqG5.js";import"./i18n.DdI5nvqw.js";import"./routing.AUKgHWzi.js";import"./avatars.Cq5Ehb_W.js";import"./advanced-inputs.RdflS6i7.js";import"./animations.BbCD7R51.js";import"./virtualization.CRoB6Qww.js";import"./framer-motion.hQ_RXnXD.js";import"./http-client.BOPSB8CA.js";import"./date-utils.j-oxXFG2.js";import"./forms.Cu5kwDD6.js";import"./security-ui.CtUVOoIj.js";import"./heic-converter.Cz_Prg7D.js";import"./markdown-processing.COZj2yMW.js";import"./sandpack.DaNuilVQ.js";import"./codemirror-core.DdRYbPwB.js";import"./codemirror-state.Pf71Wo5N.js";import"./codemirror-view.DQbtDuiL.js";import"./codemirror-language.ua2U4QXh.js";function Ke({hasMemoryOptOut:a,hasAnyPersonalizationFeature:t}){var l;const n=_(),{showToast:r}=b(),{data:i}=N(),[o,c]=e.useState(!0),m=w({onSuccess:()=>{r({message:n("com_ui_preferences_updated"),status:"success"})},onError:()=>{r({message:n("com_ui_error_updating_preferences"),status:"error"}),c((e=>!e))}});e.useEffect((()=>{var e;void 0!==(null==(e=null==i?void 0:i.personalization)?void 0:e.memories)&&c(i.personalization.memories)}),[null==(l=null==i?void 0:i.personalization)?void 0:l.memories]);return t?s.jsx("div",{className:"flex flex-col gap-3 text-sm text-text-primary",children:a&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-b border-border-medium pb-3",children:s.jsx("div",{className:"text-base font-semibold",children:n("com_ui_memory")})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{id:"reference-saved-memories-label",className:"flex items-center gap-2",children:n("com_ui_reference_saved_memories")}),s.jsx("div",{id:"reference-saved-memories-description",className:"mt-1 text-xs text-text-secondary",children:n("com_ui_reference_saved_memories_description")})]}),s.jsx(y,{checked:o,onCheckedChange:e=>{c(e),m.mutate({memories:e})},disabled:m.isLoading,"aria-labelledby":"reference-saved-memories-label","aria-describedby":"reference-saved-memories-description"})]})]})}):s.jsx("div",{className:"flex flex-col gap-3 text-sm text-text-primary",children:s.jsx("div",{className:"text-text-secondary",children:n("com_ui_no_personalization_available")})})}function Ue({open:n,onOpenChange:r}){var i,o;const c=A("(max-width: 767px)"),{data:m}=z(),d=_(),[x,u]=e.useState(F.GENERAL),p=e.useRef({}),{hasAnyPersonalizationFeature:h,hasMemoryOptOut:g}=function(){const e=C({permissionType:k.MEMORIES,permission:S.OPT_OUT});return{hasMemoryOptOut:e,hasAnyPersonalizationFeature:e}}(),v=[{value:F.GENERAL,icon:s.jsx(M,{}),label:"com_nav_setting_general"},{value:F.CHAT,icon:s.jsx(a,{className:"icon-sm"}),label:"com_nav_setting_chat"},{value:F.COMMANDS,icon:s.jsx(t,{className:"icon-sm"}),label:"com_nav_commands"},{value:F.SPEECH,icon:s.jsx(O,{className:"icon-sm"}),label:"com_nav_setting_speech"},...h?[{value:F.PERSONALIZATION,icon:s.jsx(I,{}),label:"com_nav_setting_personalization"}]:[],{value:F.DATA,icon:s.jsx(R,{}),label:"com_nav_setting_data"},...(null==(i=null==m?void 0:m.balance)?void 0:i.enabled)?[{value:F.BALANCE,icon:s.jsx(l,{size:18}),label:"com_nav_setting_balance"}]:[],{value:F.ACCOUNT,icon:s.jsx(E,{}),label:"com_nav_setting_account"}];return s.jsx(Le,{appear:!0,show:n,children:s.jsxs(He,{as:"div",className:"relative z-50",onClose:r,children:[s.jsx(Ve,{enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black opacity-50 dark:opacity-80","aria-hidden":"true"})}),s.jsx(Ve,{enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsx("div",{className:T("fixed inset-0 flex w-screen items-center justify-center p-4"),children:s.jsxs(Be,{className:T("min-h-[600px] overflow-hidden rounded-xl rounded-b-lg bg-background pb-6 shadow-2xl backdrop-blur-2xl animate-in sm:rounded-2xl md:min-h-[373px] md:w-[680px]"),children:[s.jsxs($e,{className:"mb-1 flex items-center justify-between p-6 pb-5 text-left",as:"div",children:[s.jsx("h2",{className:"text-lg font-medium leading-6 text-text-primary",children:d("com_nav_settings")}),s.jsxs("button",{type:"button",className:"rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-border-xheavy focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-surface-primary dark:focus:ring-offset-surface-primary",onClick:()=>r(!1),children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-text-primary",children:[s.jsx("line",{x1:"18",x2:"6",y1:"6",y2:"18"}),s.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"})]}),s.jsx("span",{className:"sr-only",children:d("com_ui_close_settings")})]})]}),s.jsx("div",{className:"max-h-[550px] overflow-auto px-6 md:max-h-[400px] md:min-h-[400px] md:w-[680px]",children:s.jsxs(Ce,{value:x,onValueChange:e=>{u(e)},className:"flex flex-col gap-10 md:flex-row",orientation:"vertical",children:[s.jsx(ke,{"aria-label":"Settings",className:T("min-w-auto max-w-auto relative -ml-[8px] flex flex-shrink-0 flex-col flex-nowrap overflow-auto sm:max-w-none",c?"flex-row rounded-xl bg-surface-secondary":"sticky top-0 h-full"),onKeyDown:e=>{var s;const a=[F.GENERAL,F.CHAT,F.COMMANDS,F.SPEECH,...h?[F.PERSONALIZATION]:[],F.DATA,...(null==(s=null==m?void 0:m.balance)?void 0:s.enabled)?[F.BALANCE]:[],F.ACCOUNT],t=a.indexOf(x);switch(e.key){case"ArrowDown":e.preventDefault(),u(a[(t+1)%a.length]);break;case"ArrowUp":e.preventDefault(),u(a[(t-1+a.length)%a.length]);break;case"Home":e.preventDefault(),u(a[0]);break;case"End":e.preventDefault(),u(a[a.length-1])}},children:v.map((({value:e,icon:a,label:t})=>s.jsxs(Se,{className:T("group relative z-10 m-1 flex items-center justify-start gap-2 rounded-xl px-2 py-1.5 transition-all duration-200 ease-in-out",c?"flex-1 justify-center text-nowrap p-1 px-3 text-sm text-text-secondary radix-state-active:bg-surface-hover radix-state-active:text-text-primary":"bg-transparent text-text-secondary radix-state-active:bg-surface-tertiary radix-state-active:text-text-primary"),value:e,ref:s=>p.current[e]=s,children:[a,d(t)]},e)))}),s.jsxs("div",{className:"overflow-auto sm:w-full sm:max-w-none md:pr-0.5 md:pt-0.5",children:[s.jsx(Ae,{value:F.GENERAL,tabIndex:-1,children:s.jsx(P,{})}),s.jsx(Ae,{value:F.CHAT,tabIndex:-1,children:s.jsx(D,{})}),s.jsx(Ae,{value:F.COMMANDS,tabIndex:-1,children:s.jsx(L,{})}),s.jsx(Ae,{value:F.SPEECH,tabIndex:-1,children:s.jsx(H,{})}),h&&s.jsx(Ae,{value:F.PERSONALIZATION,tabIndex:-1,children:s.jsx(Ke,{hasMemoryOptOut:g,hasAnyPersonalizationFeature:h})}),s.jsx(Ae,{value:F.DATA,tabIndex:-1,children:s.jsx(V,{})}),(null==(o=null==m?void 0:m.balance)?void 0:o.enabled)&&s.jsx(Ae,{value:F.BALANCE,tabIndex:-1,children:s.jsx(B,{})}),s.jsx(Ae,{value:F.ACCOUNT,tabIndex:-1,children:s.jsx($,{})})]})]})})]})})})]})})}function qe({column:e,title:a,className:t="",filters:l,valueMap:i}){const o=_();return e.getCanSort()?s.jsx("div",{className:T("flex items-center space-x-2",t),children:s.jsxs(K,{children:[s.jsx(U,{asChild:!0,children:s.jsxs(q,{variant:"ghost",className:"px-2 py-0 text-xs hover:bg-surface-hover data-[state=open]:bg-surface-hover sm:px-2 sm:py-2 sm:text-sm",children:[s.jsx("span",{children:a}),e.getIsFiltered()?s.jsx(n,{className:"icon-sm ml-2 text-muted-foreground/70"}):s.jsx(n,{className:"icon-sm ml-2 opacity-30"}),(()=>{const a=e.getIsSorted();return"desc"===a?s.jsx(ze,{className:"icon-sm ml-2"}):"asc"===a?s.jsx(Fe,{className:"icon-sm ml-2"}):s.jsx(Me,{className:"icon-sm ml-2"})})()]})}),s.jsxs(G,{align:"start",className:"z-[1001] dark:border-gray-700 dark:bg-gray-850",children:[s.jsxs(W,{onClick:()=>e.toggleSorting(!1),className:"cursor-pointer text-text-primary",children:[s.jsx(Fe,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),o("com_ui_ascending")]}),s.jsxs(W,{onClick:()=>e.toggleSorting(!0),className:"cursor-pointer text-text-primary",children:[s.jsx(ze,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),o("com_ui_descending")]}),s.jsx(Z,{className:"dark:bg-gray-500"}),l&&Object.entries(l).map((([a,t])=>t.map((t=>{const l=null==i?void 0:i[t??""],r=null!=l&&l.length?o(l):String(t);return r?s.jsxs(W,{className:"cursor-pointer text-text-primary",onClick:()=>{e.setFilterValue(t)},children:[s.jsx(n,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),r]},`${a}-${t}`):null})))),l&&s.jsxs(W,{className:e.getIsFiltered()?"cursor-pointer dark:text-white dark:hover:bg-gray-800":"pointer-events-none opacity-30",onClick:()=>{e.setFilterValue(void 0)},children:[s.jsx(r,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),o("com_ui_show_all")]})]})]})}):s.jsx("div",{className:T(t),children:a})}const Ge={[le.avatar]:"com_ui_avatar",[le.unknown]:"com_ui_unknown",[le.assistants]:"com_ui_assistants",[le.image_generation]:"com_ui_image_gen",[le.assistants_output]:"com_ui_assistants_output",[le.message_attachment]:"com_ui_attachment"},We=[{id:"select",header:({table:e})=>s.jsx(Q,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s),"aria-label":"Select all",className:"flex"}),cell:({row:e})=>s.jsx(Q,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),"aria-label":"Select row",className:"flex"}),enableSorting:!1,enableHiding:!1},{meta:{size:"150px"},accessorKey:"filename",header:({column:e})=>{const a=_();return s.jsxs(q,{variant:"ghost",className:"px-2 py-0 text-xs hover:bg-surface-hover sm:px-2 sm:py-2 sm:text-sm",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:[a("com_ui_name"),s.jsx(i,{className:"ml-2 h-3 w-4 sm:h-4 sm:w-4"})]})},cell:({row:e})=>{var a;const t=e.original;if(null==(a=t.type)?void 0:a.startsWith("image"))return s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{url:t.filepath,className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-md",source:t.source}),s.jsx("span",{className:"self-center truncate",children:t.filename})]});const l=X(t.type);return s.jsxs("div",{className:"flex gap-2",children:[l&&s.jsx(Y,{fileType:l,className:"relative",file:t}),s.jsx("span",{className:"self-center truncate",children:t.filename})]})}},{accessorKey:"updatedAt",header:({column:e})=>{const a=_();return s.jsxs(q,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"px-2 py-0 text-xs hover:bg-surface-hover sm:px-2 sm:py-2 sm:text-sm",children:[a("com_ui_date"),s.jsx(i,{className:"ml-2 h-3 w-4 sm:h-4 sm:w-4"})]})},cell:({row:e})=>{var s;const a=A("(max-width: 768px)");return ee((null==(s=e.original.updatedAt)?void 0:s.toString())??"",a)}},{accessorKey:"filterSource",header:({column:e})=>{const a=_();return s.jsx(qe,{column:e,title:a("com_ui_storage"),filters:{Storage:Object.values(se).filter((e=>e===se.local||e===se.openai||e===se.azure))},valueMap:{[se.azure]:"com_ui_azure",[se.openai]:"com_ui_openai",[se.local]:"com_ui_host"}})},cell:({row:e})=>{const a=_(),{source:t}=e.original;return t===se.openai?s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(ae,{className:"icon-sm text-green-600/50"}),"OpenAI"]}):t===se.azure?s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(te,{className:"icon-sm text-cyan-700"}),"Azure"]}):s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(o,{className:"icon-sm text-cyan-700"}),a("com_ui_host")]})}},{accessorKey:"context",header:({column:e})=>{const a=_();return s.jsx(qe,{column:e,title:a("com_ui_context"),filters:{Context:Object.values(le).filter((e=>e===le[e??""]))},valueMap:Ge})},cell:({row:e})=>{const{context:a}=e.original,t=_();return s.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t(Ge[a??le.unknown])})}},{accessorKey:"bytes",header:({column:e})=>{const a=_();return s.jsxs(q,{variant:"ghost",className:"px-2 py-0 text-xs hover:bg-surface-hover sm:px-2 sm:py-2 sm:text-sm",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:[a("com_ui_size"),s.jsx(i,{className:"ml-2 h-3 w-4 sm:h-4 sm:w-4"})]})},cell:({row:e})=>{const s=Number((Number(e.original.bytes)/1024/1024).toFixed(2));return s<.01?"< 0.01 MB":`${s} MB`}}],Ze={[le.filename]:"com_ui_name",[le.updatedAt]:"com_ui_date",[le.filterSource]:"com_ui_storage",[le.context]:"com_ui_context",[le.bytes]:"com_ui_size"};function Qe({columns:a,data:t}){var l;const r=_(),[i,o]=e.useState(!1),m=c(ne.filesByIndex(0)),{deleteFiles:d}=function(e){const s=Oe(),a=v({onMutate:async e=>{const{files:s}=e;return s.length?{filesToDeleteMap:s.reduce(((e,s)=>(e.set(s.file_id,s),e)),new Map)}:new Map},onSuccess:(a,t,l)=>{console.log("Files deleted");const{filesToDeleteMap:n}=l;s.setQueryData([j.files],(e=>{const{files:s}=t;return s.length?null==e?void 0:e.filter((e=>!n.has(e.file_id))):e})),null==e||e()},onError:s=>{console.log("Error deleting files:",s),null==e||e()}});return f({mutateAsync:a.mutateAsync})}((()=>o(!1))),[x,u]=e.useState({}),[p,h]=e.useState([]),g=A("(max-width: 768px)"),[b,N]=e.useState([]),[w,y]=e.useState({}),C=Ie({data:t,columns:a,onSortingChange:h,getCoreRowModel:Pe(),getSortedRowModel:Te(),onColumnFiltersChange:N,getFilteredRowModel:Ee(),onColumnVisibilityChange:y,getPaginationRowModel:Re(),onRowSelectionChange:u,state:{sorting:p,columnFilters:b,columnVisibility:w,rowSelection:x}});return s.jsxs("div",{className:"flex h-full flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2 sm:gap-4 sm:py-4",children:[s.jsxs(q,{variant:"outline",onClick:()=>{o(!0);const e=C.getFilteredSelectedRowModel().rows.map((e=>e.original));d({files:e,setFiles:m}),u({})},disabled:!C.getFilteredSelectedRowModel().rows.length||i,className:T("min-w-[40px] transition-all duration-200",g&&"px-2 py-1"),children:[i?s.jsx(re,{className:"size-3.5 sm:size-4"}):s.jsx(ie,{className:"size-3.5 text-red-400 sm:size-4"}),!g&&s.jsx("span",{className:"ml-2",children:r("com_ui_delete")})]}),s.jsx(oe,{placeholder:r("com_files_filter"),value:(null==(l=C.getColumn("filename"))?void 0:l.getFilterValue())??"",onChange:e=>{var s;return null==(s=C.getColumn("filename"))?void 0:s.setFilterValue(e.target.value)},className:"flex-1 text-sm"}),s.jsxs(K,{children:[s.jsx(U,{asChild:!0,children:s.jsx(q,{variant:"outline",className:T("min-w-[40px]",g&&"px-2 py-1"),children:s.jsx(n,{className:"size-3.5 sm:size-4"})})}),s.jsx(G,{align:"end",className:"max-h-[300px] overflow-y-auto dark:border-gray-700 dark:bg-gray-850",children:C.getAllColumns().filter((e=>e.getCanHide())).map((e=>s.jsx(ce,{className:"cursor-pointer text-sm capitalize dark:text-white dark:hover:bg-gray-800",checked:e.getIsVisible(),onCheckedChange:s=>e.toggleVisibility(Boolean(s)),children:r(Ze[e.id])},e.id)))})]})]}),s.jsx("div",{className:"relative grid h-full max-h-[calc(100vh-20rem)] w-full flex-1 overflow-hidden overflow-x-auto overflow-y-auto rounded-md border border-black/10 dark:border-white/10",children:s.jsxs(me,{className:"w-full min-w-[300px] border-separate border-spacing-0",children:[s.jsx(de,{className:"sticky top-0 z-50",children:C.getHeaderGroups().map((e=>s.jsx(xe,{className:"border-b border-border-light",children:e.headers.map(((e,a)=>{const t={};return 0===a&&"select"===e.id?(t.width="35px",t.minWidth="35px"):"filename"===e.id?t.width=g?"60%":"40%":t.width=g?"20%":"15%",s.jsx(ue,{className:"whitespace-nowrap bg-surface-secondary px-2 py-2 text-left text-sm font-medium text-text-secondary sm:px-4",style:{...t},children:e.isPlaceholder?null:De(e.column.columnDef.header,e.getContext())},e.id)}))},e.id)))}),s.jsx(pe,{className:"w-full",children:C.getRowModel().rows.length?C.getRowModel().rows.map((e=>s.jsx(xe,{"data-state":e.getIsSelected()&&"selected",className:"border-b border-border-light transition-colors hover:bg-surface-secondary [tr:last-child_&]:border-b-0",children:e.getVisibleCells().map(((e,a)=>{var t;const l=(null==(t=e.column.columnDef.meta)?void 0:t.size)??"auto",n={};return"filename"===e.column.id?n.maxWidth=l:0===a&&(n.maxWidth="20px"),s.jsx(he,{className:"align-start overflow-x-auto px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-sm [tr[data-disabled=true]_&]:opacity-50",style:n,children:De(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id))):s.jsx(xe,{children:s.jsx(he,{colSpan:a.length,className:"h-24 text-center",children:r("com_files_no_results")})})})]})}),s.jsxs("div",{className:"flex items-center justify-end gap-2 py-4",children:[s.jsxs("div",{className:"ml-2 flex-1 truncate text-xs text-muted-foreground sm:ml-4 sm:text-sm",children:[s.jsx("span",{className:"hidden sm:inline",children:r("com_files_number_selected",{0:`${C.getFilteredSelectedRowModel().rows.length}`,1:`${C.getFilteredRowModel().rows.length}`})}),s.jsx("span",{className:"sm:hidden",children:`${C.getFilteredSelectedRowModel().rows.length}/${C.getFilteredRowModel().rows.length}`})]}),s.jsxs("div",{className:"flex items-center space-x-1 pr-2 text-xs font-bold text-text-primary sm:text-sm",children:[s.jsx("span",{className:"hidden sm:inline",children:r("com_ui_page")}),s.jsx("span",{children:C.getState().pagination.pageIndex+1}),s.jsx("span",{children:"/"}),s.jsx("span",{children:C.getPageCount()})]}),s.jsx(q,{className:"select-none",variant:"outline",size:"sm",onClick:()=>C.previousPage(),disabled:!C.getCanPreviousPage(),children:r("com_ui_prev")}),s.jsx(q,{className:"select-none",variant:"outline",size:"sm",onClick:()=>C.nextPage(),disabled:!C.getCanNextPage(),children:r("com_ui_next")})]})]})}function Je({open:e,onOpenChange:a}){const t=_(),{data:l=[]}=ge({select:e=>e.map((e=>(e.context=e.context??le.unknown,e.filterSource=e.source===se.firebase?se.local:e.source,e)))});return s.jsx(ve,{open:e,onOpenChange:a,children:s.jsxs(je,{title:t("com_nav_my_files"),className:"w-11/12 bg-background text-text-primary shadow-2xl",children:[s.jsx(fe,{children:s.jsx(_e,{children:t("com_nav_my_files")})}),s.jsx(Qe,{columns:We,data:l})]})})}se.openai,se.local,se.local,se.local;const Xe=e.memo((function(){var a,t;const l=_(),{user:n,isAuthenticated:r,logout:i}=be(),{data:o}=z(),c=Ne({enabled:!!r&&(null==(a=null==o?void 0:o.balance)?void 0:a.enabled)}),[v,j]=e.useState(!1),[f,b]=m(ne.showFiles);return s.jsxs(d,{children:[s.jsxs(x,{"aria-label":l("com_nav_account_settings"),"data-testid":"nav-user",className:"mt-text-sm flex h-auto w-full items-center gap-2 rounded-xl p-2 text-sm transition-all duration-200 ease-in-out hover:bg-surface-hover",children:[s.jsx("div",{className:"-ml-0.9 -mt-0.8 h-8 w-8 flex-shrink-0",children:s.jsx("div",{className:"relative flex",children:s.jsx(we,{user:n,size:32})})}),s.jsx("div",{className:"mt-2 grow overflow-hidden text-ellipsis whitespace-nowrap text-left text-text-primary",style:{marginTop:"0",marginLeft:"0"},children:(null==n?void 0:n.name)??(null==n?void 0:n.username)??l("com_nav_user")})]}),s.jsxs(u,{className:"popover-ui w-[235px]",style:{transformOrigin:"bottom",marginRight:"0px",translate:"0px"},children:[s.jsx("div",{className:"text-token-text-secondary ml-3 mr-2 py-2 text-sm",role:"note",children:(null==n?void 0:n.email)??l("com_nav_user")}),s.jsx(Z,{}),!0===(null==(t=null==o?void 0:o.balance)?void 0:t.enabled)&&null!=c.data&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-token-text-secondary ml-3 mr-2 py-2 text-sm",role:"note",children:[l("com_nav_balance"),":"," ",(new Intl.NumberFormat).format(Math.round(c.data.tokenCredits))]}),s.jsx(Z,{})]}),s.jsxs(p,{value:"",onClick:()=>b(!0),className:"select-item text-sm",children:[s.jsx(h,{className:"icon-md","aria-hidden":"true"}),l("com_nav_my_files")]}),"/"!==(null==o?void 0:o.helpAndFaqURL)&&s.jsxs(p,{value:"",onClick:()=>window.open(null==o?void 0:o.helpAndFaqURL,"_blank"),className:"select-item text-sm",children:[s.jsx(ye,{"aria-hidden":"true"}),l("com_nav_help_faq")]}),s.jsxs(p,{value:"",onClick:()=>j(!0),className:"select-item text-sm",children:[s.jsx(M,{className:"icon-md","aria-hidden":"true"}),l("com_nav_settings")]}),s.jsx(Z,{}),s.jsxs(p,{"aria-selected":!0,onClick:()=>i(),value:"logout",className:"select-item text-sm",children:[s.jsx(g,{className:"icon-md"}),l("com_nav_log_out")]})]}),f&&s.jsx(Je,{open:f,onOpenChange:b}),v&&s.jsx(Ue,{open:v,onOpenChange:j})]})}));export{Xe as default};
